# Feature Specification: 비기능 요구사항

**Feature Branch**: `005-non-functional-requirements`
**Created**: 2026-01-14
**Status**: Draft
**Input**: User description: "비기능 요구사항: 오프라인 감지 및 대용량 파일 경고"

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 오프라인 상태에서 발행 시도 시 안내 (Priority: P1)

사용자가 인터넷 연결이 끊긴 상태에서 노트를 발행하려고 시도할 때, 시스템은 명확한 오프라인 상태 안내를 제공하여 사용자가 왜 발행이 불가능한지 즉시 이해할 수 있도록 합니다.

**Why this priority**: 오프라인 상태에서 발행을 시도하면 모호한 오류 메시지가 표시되거나 무한 대기 상태에 빠질 수 있습니다. 사용자에게 명확한 피드백을 제공하여 혼란을 방지하고 사용자 경험을 개선합니다.

**Independent Test**: 네트워크 연결을 끊고 발행 명령을 실행하여 오프라인 안내 메시지가 표시되는지 확인할 수 있습니다.

**Acceptance Scenarios**:

1. **Given** 사용자가 오프라인 상태일 때, **When** 단일 노트 발행 명령을 실행하면, **Then** "인터넷 연결을 확인해주세요" 안내 메시지가 표시되고 발행이 진행되지 않습니다.
2. **Given** 사용자가 오프라인 상태일 때, **When** 대시보드에서 일괄 발행을 시도하면, **Then** 오프라인 상태 안내와 함께 발행 버튼이 비활성화됩니다.
3. **Given** 사용자가 발행 중에 네트워크가 끊어졌을 때, **When** GitHub API 호출이 실패하면, **Then** 네트워크 오류 메시지와 함께 재시도 안내가 표시됩니다.

---

### User Story 2 - 대용량 파일 업로드 경고 (Priority: P2)

사용자가 10MB를 초과하는 파일(이미지, 첨부파일)을 포함한 노트를 발행하려고 할 때, 시스템은 사전에 경고를 표시하여 GitHub의 파일 크기 제한으로 인한 발행 실패를 방지합니다.

**Why this priority**: GitHub API는 대용량 파일 업로드에 제한이 있으며, 발행 도중 실패하면 사용자가 원인을 파악하기 어렵습니다. 사전 경고로 문제를 예방합니다.

**Independent Test**: 10MB 이상의 이미지가 포함된 노트를 발행하여 경고 메시지가 표시되는지 확인할 수 있습니다.

**Acceptance Scenarios**:

1. **Given** 노트에 10MB를 초과하는 첨부파일이 있을 때, **When** 발행 명령을 실행하면, **Then** 해당 파일에 대한 경고 메시지가 표시됩니다.
2. **Given** 대용량 파일 경고가 표시되었을 때, **When** 사용자가 "계속 진행"을 선택하면, **Then** 발행이 시도됩니다(실패할 수 있음).
3. **Given** 대용량 파일 경고가 표시되었을 때, **When** 사용자가 "취소"를 선택하면, **Then** 발행이 중단되고 사용자는 파일을 수정할 수 있습니다.
4. **Given** 대시보드에서 여러 노트를 선택했을 때, **When** 일괄 발행을 시도하면, **Then** 대용량 파일이 포함된 모든 노트 목록이 표시됩니다.

---

### Edge Cases

- 네트워크가 불안정하여 간헐적으로 연결/해제될 때 어떻게 처리하나요?
  - 발행 시점에 네트워크 상태를 확인하고, 발행 중 실패 시 명확한 오류 메시지와 재시도 옵션을 제공합니다.
- 여러 개의 대용량 파일이 있는 노트는 어떻게 처리하나요?
  - 모든 대용량 파일 목록을 한 번에 표시하고, 각 파일의 크기를 명시합니다.
- 10MB에 매우 근접한 파일(9.9MB)은 어떻게 처리하나요?
  - 10MB 미만이므로 경고 없이 진행하되, 발행 실패 시 파일 크기 관련 안내를 제공합니다.
- 오프라인 상태에서 대시보드를 열 때는 어떻게 처리하나요?
  - 대시보드는 로컬 데이터로 열 수 있지만, 동기화 상태 새로고침 시 오프라인 안내를 표시합니다.

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: 시스템은 발행 명령 실행 시 네트워크 연결 상태를 확인해야 합니다.
- **FR-002**: 오프라인 상태일 때 시스템은 사용자에게 명확한 오프라인 안내 메시지를 표시해야 합니다.
- **FR-003**: 오프라인 안내 메시지는 "인터넷 연결을 확인해주세요"와 같이 사용자 친화적이어야 합니다.
- **FR-004**: 시스템은 발행 대상 노트의 첨부파일 크기를 검사해야 합니다.
- **FR-005**: 10MB를 초과하는 파일이 발견되면 시스템은 경고 모달을 표시해야 합니다.
- **FR-006**: 대용량 파일 경고 모달은 파일명과 크기를 표시해야 합니다.
- **FR-007**: 사용자는 대용량 파일 경고에서 "계속 진행" 또는 "취소"를 선택할 수 있어야 합니다.
- **FR-008**: 대시보드의 일괄 발행에서도 대용량 파일이 포함된 노트 목록을 표시해야 합니다.
- **FR-009**: 발행 중 네트워크 오류 발생 시 사용자에게 재시도 안내를 제공해야 합니다.

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 오프라인 상태에서 발행 시도 시 2초 이내에 오프라인 안내 메시지가 표시됩니다.
- **SC-002**: 대용량 파일이 포함된 노트 발행 시 100% 사전 경고가 표시됩니다.
- **SC-003**: 사용자가 오프라인 상태를 인지하지 못하고 발행을 기다리는 시간이 0초가 됩니다(즉시 안내).
- **SC-004**: 대용량 파일로 인한 발행 실패 후 원인을 파악하지 못하는 사례가 0%가 됩니다.

## Assumptions

- 네트워크 연결 상태 확인은 브라우저/Electron의 `navigator.onLine` API를 활용합니다.
- 대용량 파일 기준인 10MB는 GitHub API의 단일 파일 업로드 제한을 고려한 값입니다.
- 기존 `MAX_FILE_SIZE` 상수(10MB)가 이미 정의되어 있습니다.
